<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Large Workflow" href="large_workflow.html" /><link rel="prev" title="Map a Python function to compute nodes" href="map_python_function.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.07.19 -->
        <title>Map a Julia function to compute nodes - Torc Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Torc Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <span class="sidebar-brand-text">Torc Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Workflow Overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../how_tos/index.html">How Tos</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of How Tos</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../how_tos/getting_started/index.html">Getting Started</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Getting Started</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/getting_started/database.html">ArangoDB instance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/getting_started/installation.html">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/getting_started/cli_fundamentals.html">CLI Fundamentals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/getting_started/quick_start.html">Workflows Quick Start</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../how_tos/managing_workflows/index.html">Managing Workflows</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Managing Workflows</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/managing_workflows/configure_workflow.html">Configure a workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/managing_workflows/run_workflow.html">Run a workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/managing_workflows/check_status.html">Check workflow status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/managing_workflows/cancel.html">Cancel a workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/managing_workflows/restart.html">Restart a workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/managing_workflows/automated_scheduling.html">Automated scheduling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/managing_workflows/gracefully_shutdown_jobs.html">Gracefully shutdown jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/managing_workflows/debugging.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/managing_workflows/passing_data_between_jobs.html">Passing data between jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/managing_workflows/plot_graphs.html">Plot Graphs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/managing_workflows/backups.html">Backups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/managing_workflows/archive.html">Archive a Workflow</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../how_tos/results/index.html">Results</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Results</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/results/join_collections.html">Join Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/results/query_with_sql.html">Query with SQL</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../how_tos/compute_node_environments/index.html">Compute Node Environments</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Compute Node Environments</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/compute_node_environments/hpc_compute_node_environment.html">HPC Compute Node Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/compute_node_environments/hpc_multi_node_jobs.html">HPC Multi-Node Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/compute_node_environments/custom_invocation_environments.html">Custom Invocation Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/compute_node_environments/run_jobs_arbitrary_computer.html">Run Jobs on an Arbitrary Computer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/compute_node_environments/slurm_hardware_control.html">Slurm Hardware Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/compute_node_environments/cpu_affinity.html">Set CPU Affinity</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../how_tos/compute_node_utilization/index.html">Compute Node Utilization</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Compute Node Utilization</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/compute_node_utilization/resource_utilization.html">Resource Utilization Statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/compute_node_utilization/node_packing.html">Node Packing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/compute_node_utilization/auto_tune_resource_requirements.html">Auto-Tune Resource Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/compute_node_utilization/parallelization_within_node.html">Parallelization within a compute node</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../how_tos/api/index.html">API</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../how_tos/api/api_access_with_curl.html">API Access With cURL</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="diamond_workflow.html">Diamond Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurm_diamond_workflow.html">Slurm Diamond Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="node_packing_workflow.html">Node-Packing Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual_job_dependencies.html">Declare Job Dependencies Manually</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpu_affinity_workflow.html">CPU Affinity Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="map_python_function.html">Map a Python function to compute nodes</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Map a Julia function to compute nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="large_workflow.html">Large Workflow</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/cli_reference.html">CLI Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/torc_api.html">Torc API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/http_api_reference.html">HTTP API Reference</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/python_client.html">Python Client API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Python Client API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/python_client_models.html">OpenAPI Client Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/python_client_default_api.html">OpenAPI Client DefaultApi</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/arangodb.html">ArangoDB</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/architecture.html">Architecture</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Architecture</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/hpc_workflow.html">HPC Diagram</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/for_developers/index.html">For Developers</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of For Developers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/for_developers/build_torc_packages.html">Build Torc Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/for_developers/generate_client_apis.html">Generate Client APIs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../explanation/index.html">Explanation</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Explanation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../explanation/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/jobs.html">Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/environments.html">Environments</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../explanation/behavioral_docs/index.html">Behavioral Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Behavioral Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../explanation/behavioral_docs/workflows.html">Workflows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../explanation/behavioral_docs/jobs.html">Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../explanation/behavioral_docs/hpc.html">HPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../explanation/behavioral_docs/db_errors.html">Database Errors</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/tutorials/map_julia_function.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="map-a-julia-function-to-compute-nodes">
<span id="map-julia-function-tutorial"></span><h1>Map a Julia function to compute nodes<a class="headerlink" href="#map-a-julia-function-to-compute-nodes" title="Link to this heading">¶</a></h1>
<p>This tutorial will teach you how to build a workflow from Julia functions instead of CLI
executables and run on it on an HPC with <code class="docutils literal notranslate"><span class="pre">Slurm</span></code>.</p>
<section id="workflow-description">
<h2>Workflow Description<a class="headerlink" href="#workflow-description" title="Link to this heading">¶</a></h2>
<p>Let’s suppose that your code is in a module called <code class="docutils literal notranslate"><span class="pre">simulation.jl</span></code> and looks something like this:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;&quot;&quot;</span>
<span class="s">Run one simulation on a set of input parameters. Return results in a Dict.</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="k">function</span><span class="w"> </span><span class="n">run</span><span class="p">(</span><span class="n">input_params</span><span class="o">::</span><span class="kt">Dict</span><span class="p">)</span><span class="o">:</span>
<span class="w">    </span><span class="n">job_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input_params</span><span class="p">[</span><span class="s">&quot;job_name&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kt">Dict</span><span class="p">{</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">Any</span><span class="p">}(</span>
<span class="w">        </span><span class="s">&quot;inputs&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input_params</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;result&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;output_data_path&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;/projects/my-project/</span><span class="si">$</span><span class="p">(</span><span class="n">job_name</span><span class="p">)</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">)</span>
<span class="k">end</span>

<span class="s">&quot;&quot;&quot;</span>
<span class="s">Collect the results of the workers and perform postprocessing.</span>
<span class="s">Return the final result in a Dict.</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="k">function</span><span class="w"> </span><span class="n">postprocess</span><span class="p">(</span><span class="n">results</span><span class="o">::</span><span class="kt">Vector</span><span class="p">{</span><span class="o">&lt;:</span><span class="kt">Dict</span><span class="p">})</span>
<span class="w">    </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">paths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">String</span><span class="p">[]</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">results</span><span class="o">:</span>
<span class="w">        </span><span class="n">assert</span><span class="w"> </span><span class="s">&quot;result&quot;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">keys</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="w">        </span><span class="n">assert</span><span class="w"> </span><span class="s">&quot;output_data_path&quot;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">keys</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="w">        </span><span class="n">total</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">result</span><span class="p">[</span><span class="s">&quot;result&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="n">push!</span><span class="p">(</span><span class="n">paths</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">[</span><span class="s">&quot;output_data_path&quot;</span><span class="p">])</span>
<span class="w">    </span><span class="k">end</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kt">Dict</span><span class="p">{</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">Any</span><span class="p">}(</span>
<span class="w">        </span><span class="s">&quot;total&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">total</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;output_data_paths&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">paths</span><span class="p">,</span>
<span class="w">    </span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>You need to run this function on hundreds of sets of input parameters and want torc to help you
scale this work on an HPC.</p>
<p>The recommended procedure for this task is torc’s Julia API as shown below.</p>
<section id="resource-constraints">
<h3>Resource Constraints<a class="headerlink" href="#resource-constraints" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Each function call needs 4 CPUs and 20 GiB of memory.</p></li>
<li><p>The function call takes 1 hour to run.</p></li>
</ul>
<p>On Eagle the 92 GiB nodes are easiest to acquire but would only be able to run 4 jobs at a time.
The 180 GiB nodes are fewer in number but would use fewer AUs because they would be able to run 8
jobs at a time.</p>
</section>
</section>
<section id="torc-overview">
<h2>Torc Overview<a class="headerlink" href="#torc-overview" title="Link to this heading">¶</a></h2>
<p>Here is what torc does to solve this problem:</p>
<ul class="simple">
<li><p>User creates a workflow in Julia.</p></li>
<li><p>User passes a runnable function as well as a list of all input parameters that need to be mapped
to the function.</p></li>
<li><p>For each set of input parameters torc creates an object in the <code class="docutils literal notranslate"><span class="pre">user-data</span></code> collection in the
database, creates a job with a relationship (edge) to that object as an input, and creates a
placeholder for data to be created by that job.</p></li>
<li><p>When torc runs each job it reads the correct input parameters from the database, imports the
user’s function, and then calls it with the input parameters.</p></li>
<li><p>When the function completes, torc stores any returned data in the database.</p></li>
<li><p>When all workers complete torc collectgs all result data from the database into a list and passes
that to the postprocess function. It also stores any returned data from that function into the
database.</p></li>
</ul>
</section>
<section id="build-the-workflow">
<h2>Build the workflow<a class="headerlink" href="#build-the-workflow" title="Link to this heading">¶</a></h2>
<ol class="arabic">
<li><p>Modify your script as necessary to match Torc’s requirements. It may be easier to create a
wrapper script that forwards to your actual code.</p>
<ul class="simple">
<li><p>The run and postprocess functions must match the signatures above. The function names do not
have to match.</p></li>
<li><p>The script must call the Torc function <code class="docutils literal notranslate"><span class="pre">process_mapped_function_cli_args</span></code> as shown below
where <code class="docutils literal notranslate"><span class="pre">run</span></code> and <code class="docutils literal notranslate"><span class="pre">postprocess</span></code> are your actual functions.</p></li>
</ul>
<blockquote>
<div><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="n">abspath</span><span class="p">(</span><span class="nb">PROGRAM_FILE</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nd">@__FILE__</span>
<span class="w">    </span><span class="n">process_mapped_function_cli_args</span><span class="p">(</span><span class="n">run</span><span class="p">,</span><span class="w"> </span><span class="n">postprocess</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p>If you don’t have a postprocess function, pass <code class="docutils literal notranslate"><span class="pre">nothing</span></code> instead.</p></li>
</ul>
</li>
<li><p>Write a script to create the workflow. Note that you need to correct the <code class="docutils literal notranslate"><span class="pre">api</span></code> URL and the
Slurm <code class="docutils literal notranslate"><span class="pre">account</span></code>. Refer to the docstring of <code class="docutils literal notranslate"><span class="pre">map_function_to_jobs</span></code> to see all available
options.</p></li>
</ol>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="n">Torc</span>
<span class="k">import</span><span class="w"> </span><span class="n">Torc</span><span class="o">:</span><span class="w"> </span><span class="n">APIClient</span>

<span class="n">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">make_api</span><span class="p">(</span><span class="s">&quot;http://localhost:8529/_db/workflows/torc-service&quot;</span><span class="p">)</span>
<span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="kt">Dict</span><span class="p">{</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">Any</span><span class="p">}(</span><span class="s">&quot;input1&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;input2&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;input3&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p">),</span>
<span class="w">    </span><span class="kt">Dict</span><span class="p">{</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">Any</span><span class="p">}(</span><span class="s">&quot;input1&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;input2&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;input3&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">6</span><span class="p">),</span>
<span class="w">    </span><span class="kt">Dict</span><span class="p">{</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">Any</span><span class="p">}(</span><span class="s">&quot;input1&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;input2&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;input3&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">9</span><span class="p">),</span>
<span class="p">]</span>
<span class="n">workflow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">send_api_command</span><span class="p">(</span>
<span class="w">    </span><span class="n">api</span><span class="p">,</span>
<span class="w">    </span><span class="n">APIClient</span><span class="o">.</span><span class="n">add_workflow</span><span class="p">,</span>
<span class="w">    </span><span class="n">APIClient</span><span class="o">.</span><span class="n">WorkflowModel</span><span class="p">(</span>
<span class="w">        </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;example_mapped_function_workflow&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Example mapped function workflow&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">),</span>
<span class="p">)</span>

<span class="n">rr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">send_api_command</span><span class="p">(</span>
<span class="w">    </span><span class="n">api</span><span class="p">,</span>
<span class="w">    </span><span class="n">APIClient</span><span class="o">.</span><span class="n">add_resource_requirements</span><span class="p">,</span>
<span class="w">    </span><span class="n">workflow</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span>
<span class="w">    </span><span class="n">APIClient</span><span class="o">.</span><span class="n">ResourceRequirementsModel</span><span class="p">(</span>
<span class="w">        </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;medium&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">num_cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">        </span><span class="n">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;20g&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">runtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;P0DT1H&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">),</span>
<span class="p">)</span>

<span class="n">jobs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">map_function_to_jobs</span><span class="p">(</span>
<span class="w">    </span><span class="n">api</span><span class="p">,</span>
<span class="w">    </span><span class="n">workflow</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;simulation.jl&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">params</span><span class="p">;</span>
<span class="w">    </span><span class="n">project_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dirname</span><span class="p">(</span><span class="n">dirname</span><span class="p">(</span><span class="n">Base</span><span class="o">.</span><span class="n">find_package</span><span class="p">(</span><span class="s">&quot;Torc&quot;</span><span class="p">))),</span>
<span class="w">    </span><span class="c"># Set this to false if you do not have a postprocess function.</span>
<span class="w">    </span><span class="n">has_postprocess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">scheduler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">api</span><span class="o">.</span><span class="n">add_slurm_scheduler</span><span class="p">(</span>
<span class="w">    </span><span class="n">workflow</span><span class="o">.</span><span class="n">key</span><span class="p">,</span>
<span class="w">    </span><span class="n">SlurmSchedulerModel</span><span class="p">(</span>
<span class="w">        </span><span class="n">name</span><span class="o">=</span><span class="s">&quot;short&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">account</span><span class="o">=</span><span class="s">&quot;my_account&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">mem</span><span class="o">=</span><span class="s">&quot;180224&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">walltime</span><span class="o">=</span><span class="s">&quot;04:00:00&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">),</span>
<span class="p">)</span>
<span class="c"># This is optional, but can be useful to look at actual resource utilization.</span>
<span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">send_api_command</span><span class="p">(</span><span class="n">api</span><span class="p">,</span><span class="w"> </span><span class="n">APIClient</span><span class="o">.</span><span class="n">get_workflow_config</span><span class="p">,</span><span class="w"> </span><span class="n">workflow</span><span class="o">.</span><span class="n">_key</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">compute_node_resource_stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">APIClient</span><span class="o">.</span><span class="n">ComputeNodeResourceStatsModel</span><span class="p">(</span>
<span class="w">    </span><span class="n">cpu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span>
<span class="w">    </span><span class="n">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span>
<span class="w">    </span><span class="n">process</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span>
<span class="w">    </span><span class="n">interval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">    </span><span class="n">monitor_type</span><span class="o">=</span><span class="s">&quot;periodic&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">make_plots</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">send_api_command</span><span class="p">(</span><span class="n">api</span><span class="p">,</span><span class="w"> </span><span class="n">APIClient</span><span class="o">.</span><span class="n">modify_workflow_config</span><span class="p">,</span><span class="w"> </span><span class="n">workflow</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span><span class="w"> </span><span class="n">config</span><span class="p">)</span>

<span class="n">println</span><span class="p">(</span><span class="s">&quot;Created workflow with key </span><span class="si">$</span><span class="p">(</span><span class="n">workflow</span><span class="o">.</span><span class="n">_key</span><span class="p">)</span><span class="s"> </span><span class="si">$</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">jobs</span><span class="p">))</span><span class="s"> jobs.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Requirements</strong>:</p>
<ul class="simple">
<li><p>Your run function should raise an exception if there is a failure. If that happens, torc will
record a non-zero return code for the job.</p></li>
<li><p>If you want torc to store result data in the database, return it from your run function.
<strong>Note</strong>: this result data must not be large - the database is not designed for that. If you have
large result data, return a pointer (i.e., file path) to its location here.</p></li>
<li><p>If you choose to define a postprocess function and want torc to store the final data in the
database, return it from that function.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">params</span></code> must be serializable in JSON format because they will be stored in the database.
Basic types like numbers and strings and lists and dictionaries of those will work fine. If you
need to store complex, custom types, consider these options:</p>
<ul>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">Serialization</span></code> library in Julia’s standard library to serialize your data and store
the result as a string. Your run function would need to understand how to de-serialize it.
Note that this has portability limitations. (Please contact the developers if you would like
to see this happen automatically.)</p></li>
</ul>
</li>
</ul>
<ol class="arabic simple" start="2">
<li><p>Create the workflow.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>julia<span class="w"> </span>--project<span class="o">=</span>&lt;path-to-env-that-includes-torc&gt;<span class="w"> </span>&lt;your-script&gt;
<span class="go">Created workflow 3141686 with 3 jobs.</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Optional: Save the workflow key in the environment to save typing.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">export</span><span class="w"> </span><span class="nv">TORC_WORKFLOW_KEY</span><span class="o">=</span><span class="m">3141686</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Optional: save the workflow specification. This illustrates how torc orchestrates this workflow
by creating relationships between jobs and the <code class="docutils literal notranslate"><span class="pre">user_data</span></code> collection. You may also want to
edit the input parameters for future runs.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torc<span class="w"> </span>workflows<span class="w"> </span>show
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Initialize the workflow.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torc<span class="w"> </span>workflows<span class="w"> </span>start
<span class="go">2023-08-07 11:51:03,891 - INFO [torc.workflow_manager workflow_manager.py:156] : Changed all uninitialized jobs to ready or blocked.</span>
<span class="go">2023-08-05 11:51:03,894 - INFO [torc.workflow_manager workflow_manager.py:82] : Started workflow</span>
</pre></div>
</div>
<ol class="arabic" start="6">
<li><p>Schedule compute nodes with <code class="docutils literal notranslate"><span class="pre">Slurm</span></code>. This example only needs one compute node. You will need
to make some estimation for your jobs.</p>
<p>The computes nodes in this example can run eight jobs at a time and can complete four rounds of
work (32 jobs per allocation). So, the number of required compute nodes is <code class="docutils literal notranslate"><span class="pre">num_jobs</span> <span class="pre">/</span> <span class="pre">32</span></code>.</p>
</li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torc<span class="w"> </span>hpc<span class="w"> </span>slurm<span class="w"> </span>schedule-nodes<span class="w"> </span>-n1
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>The jobs will run whenever Slurm allocates compute nodes. Monitor status as discussed in
<a class="reference internal" href="../how_tos/managing_workflows/check_status.html#check-status"><span class="std std-ref">Check workflow status</span></a>.</p></li>
<li><p>View the result data overall or by job (if your run and postprocess functions return something).
Note that listing all user-data will return input parameters.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torc<span class="w"> </span>list<span class="w"> </span>user-data
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torc<span class="w"> </span><span class="nb">jobs</span><span class="w"> </span>list-user-data<span class="w"> </span>--stores<span class="w"> </span><span class="m">788309</span>
<span class="gp">$ </span>torc<span class="w"> </span><span class="nb">jobs</span><span class="w"> </span>list-user-data<span class="w"> </span>--stores<span class="w"> </span><span class="m">788323</span>
<span class="gp">$ </span>torc<span class="w"> </span><span class="nb">jobs</span><span class="w"> </span>list-user-data<span class="w"> </span>--stores<span class="w"> </span><span class="m">788337</span>
<span class="gp">$ </span>torc<span class="w"> </span><span class="nb">jobs</span><span class="w"> </span>list-user-data<span class="w"> </span>--stores<span class="w"> </span><span class="m">788389</span>
</pre></div>
</div>
</section>
<section id="other-jobs">
<h2>Other jobs<a class="headerlink" href="#other-jobs" title="Link to this heading">¶</a></h2>
<p>You could add “normal” jobs to the workflow as well. For example, you might have preprocessing and
postprocessing work to do. You can add those jobs through the API. You could also add multiple
rounds of mapped functions. <code class="docutils literal notranslate"><span class="pre">map_function_to_jobs</span></code> provides a <code class="docutils literal notranslate"><span class="pre">blocked_by</span></code> parameter to specify
ordering. You could also define job-job relationships through files or user-data as discussed
elsewhere in this documentation.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="large_workflow.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Large Workflow</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="map_python_function.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Map a Python function to compute nodes</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Alliance for Sustainable Energy, LLC
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Map a Julia function to compute nodes</a><ul>
<li><a class="reference internal" href="#workflow-description">Workflow Description</a><ul>
<li><a class="reference internal" href="#resource-constraints">Resource Constraints</a></li>
</ul>
</li>
<li><a class="reference internal" href="#torc-overview">Torc Overview</a></li>
<li><a class="reference internal" href="#build-the-workflow">Build the workflow</a></li>
<li><a class="reference internal" href="#other-jobs">Other jobs</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=38b66d78"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=3a0c56fd"></script>
    </body>
</html>