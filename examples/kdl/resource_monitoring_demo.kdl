// Resource Monitoring Demo Workflow in KDL format
// This workflow demonstrates the resource monitoring feature

name "resource_monitoring_demo"
user "demo_user"
description "Demonstrates resource monitoring with CPU and memory intensive Python jobs"

// Enable resource monitoring with time-series data collection
resource_monitor {
    enabled #true
    granularity "time_series"
    sample_interval_seconds 2
    generate_plots #false
}

// Resource requirements
resource_requirements "cpu" {
    num_cpus 3
    num_gpus 0
    num_nodes 1
    memory "1g"
    runtime "PT15M"
}

resource_requirements "memory" {
    num_cpus 1
    num_gpus 0
    num_nodes 1
    memory "5g"
    runtime "PT10M"
}

resource_requirements "mixed" {
    num_cpus 3
    num_gpus 0
    num_nodes 1
    memory "5g"
    runtime "PT15M"
}

// Three independent jobs that run concurrently
job "cpu_heavy_job" {
    command "python3 examples/scripts/cpu_intensive.py"
    resource_requirements "cpu"
}

job "memory_heavy_job" {
    command "python3 examples/scripts/memory_intensive.py"
    resource_requirements "memory"
}

job "mixed_workload_job" {
    command "python3 examples/scripts/mixed_workload.py"
    resource_requirements "mixed"
}
